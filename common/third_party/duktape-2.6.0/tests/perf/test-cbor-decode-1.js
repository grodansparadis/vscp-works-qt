if (typeof print !== 'function') { print = console.log; }

function test() {
    // Encoded data from test-cbor-encode-1.js.
    var u8 = new Uint8Array([
        0xa3, 0x67, 0x6a, 0x73, 0x6f, 0x6e, 0x72, 0x70,
        0x63, 0x63, 0x32, 0x2e, 0x30, 0x66, 0x6d, 0x65,
        0x74, 0x68, 0x6f, 0x64, 0x66, 0x46, 0x6f, 0x6f,
        0x42, 0x61, 0x72, 0x66, 0x70, 0x61, 0x72, 0x61,
        0x6d, 0x73, 0xa3, 0x63, 0x66, 0x6f, 0x6f, 0x18,
        0x7b, 0x63, 0x62, 0x61, 0x72, 0x83, 0xf5, 0xf4,
        0xfb, 0x40, 0x5e, 0xdd, 0x2f, 0x1a, 0x9f, 0xbe,
        0x77, 0x64, 0x71, 0x75, 0x75, 0x78, 0xa2, 0x63,
        0x62, 0x61, 0x7a, 0xf5, 0x65, 0x71, 0x75, 0x75,
        0x75, 0x78, 0xf4 ]);
    var buf = u8.buffer;

    for (var i = 0; i < 1e5; i++) {
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
        void CBOR.decode(buf);
    }
}

try {
    test();
} catch (e) {
    print(e.stack || e);
    throw e;
}
